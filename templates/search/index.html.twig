{% extends 'base.html.twig' %}

{% block title %}Hello SearchController!{% endblock %}

{% block body %}
<h1>Resultat de la recherche</h1>
{% if app.request.method == 'POST' %}
{% if seances is empty and users is empty %}
<h2>Aucun résultat pour votre recherche</h2>
{% else %}
<div class="container">
    {% if seances is not empty %}
    <h1 class="text-center">Résultats de la recherche pour les séances</h1>
    {% for seance in seances %}
    <div class="mb-3">
        <div class="card">
            <div class="card-body d-flex justify-content-between">
                <div class="">
                    <div class="d-flex align-items-center  pb-3">
                        <div class="d-flex align-items-center">
                            <img class="avatar avatar-2 m-3"
                                src="{{ asset('uploads/avatars/' ~ seance.user.pictureFile) }}" alt="">
                            <p>{{ seance.user.username }}</p>
                        </div>
                        <div class="mx-5">
                            <p class="date">{{ seance.createAt | date('d/m/Y') }}</p>
                            <h5>{{ seance.name }}</h5>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <img class="seance-picture" src="{{ asset('uploads/picturesSeances/' ~ seance.pictureFile) }}"
                            alt="">
                        <p class="px-3">{{ seance.description }}</p>
                    </div>
                </div>
                <div class="d-flex flex-column justify-content-between">
                    <div class="d-flex justify-content-end">
                    </div>
                    <div class="d-flex flex-column align-items-end">
                        <p>{{ seance.likes | length}} likes</p>
                        <p>commentaire</p>
                        <a href="{{ path('show_workout', {'id': seance.id}) }}">Voir</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    {% endif %}

    {% if users is not empty %}
    <h1 class="text-center">Résultats de la recherche pour les utilisateurs</h1>
    {% for user in users %}
    <div class="row">
        <div class="card p-4 mb-3">
            <div class="card-body d-flex justify-content-around">
                <div class="d-flex flex-column align-items-center" style="min-width : 150px">
                    <img class="avatar" src="{{ asset('uploads/avatars/' ~ user.pictureFile) }}" alt="">
                    <a href="{{ path('user_profil_visited', {'id': user.id })}}">
                        <h4 class="card-title mt-2"> {{ user.username }} </h4>
                    </a>
                </div>
                <div class="pt-4 px-4 mx-4 flex-fill">
                    <p class="font-weight-light">{{ user.description }}</p>
                </div>
                <div style="min-width : 150px">
                    <h5>Sports :</h5>
                    <p>{{ user.sports }}</p>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    {% endif %}
</div>
{% endif %}
{% endif %}
{% endblock %}